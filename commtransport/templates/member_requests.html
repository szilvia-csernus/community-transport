{% extends "base.html" %}

<!-- Header elements  -->
{% block left_nav_elements %}
<a href="{{ url_for('confirm_signout', user_id=user.id)}}" aria-label="link to home page">
    <div class="logo left-align my-dark-blue-text">CT&ast; Egham, Surrey</div>
    <div class="left-align my-dark-blue-text">
        <img class="red-car-small" src="{{ url_for('static', filename='assets/new-red-car.svg')}}" alt="red car">
        {{user.fullname}}
        {% if user.is_admin and user.is_volunteer %}
        (<span class="my-red-text">admin</span> and <span class="my-green-text">volunteer</span>)
        {% elif user.is_admin %}
        (<span class="my-red-text">admin</span>)
        {% elif user.is_volunteer %}
        (<span class="my-green-text">volunteer</span>)
        {% endif %}
    </div>
</a>
{% endblock %}

{% block right_nav_elements %}
<li><a class="my-nav-element my-dark-blue-text" href="{{ url_for('member_requests', user_id=user.id)}}">My Requests</a>
</li>
<li><a class="my-nav-element my-dark-blue-text" href="{{ url_for('new_request', user_id=user.id)}}">New Request</a>
</li>
<li><a class="my-nav-element my-dark-blue-text" href="{{ url_for('member_profile', user_id=user.id)}}">Profile</a></li>
{% endblock %}

{% block sidenav_elements %}
<li><a class="my-nav-element my-dark-blue-text" href="{{ url_for('member_requests', user_id=user.id)}}">My Requests</a>
</li>
<li><a class="my-nav-element my-dark-blue-text" href="{{ url_for('new_request', user_id=user.id)}}">New Request</a>
</li>
<li><a class="my-nav-element my-dark-blue-text" href="{{ url_for('member_profile', user_id=user.id)}}">Profile</a></li>
{% endblock %}

{% block content %}

<!-- List of Current Requests -->
{% if future_requests|length > 0 %}

<h3 class=" center-align">My Requests</h3>
<ul class="collapsible">
    {% for req in future_requests %}
    <li>
        <div class="collapsible-header ">

            <!-- Date and Time  -->
            <div class="col s12 m9">
                <i class="fas fa-caret-down"></i>
                <span>Date and Time: {{ req.request_date}} - {{ req.request_time }}</span>

            </div>
            <!-- Badges  -->
            <div>
                {% if not req.volunteer_id %}
                <span class="my-green-text">Awaiting Volunteer</span>
                {% else %}
                <span class="my-green-text">Arranged</span>
                {% endif %}
            </div>
        </div>
        <!-- Member details  -->
        <div class="collapsible-body white">
            <p>Pickup Address: <em>{{ req.start_location.address }}</em></strong></p>
            <p>Dropoff Address: <em>{{ req.end_location.address }}</em></p>
            {% if not req.volunteer %}
            <p class="my-green-text">No volunteer has come forward yet.</p>
            {% else %}
            <p class="my-green-text">Volunteer: <em>{{ req.volunteer.fullname }}</em></p>
            {% endif %}

        </div>
    </li>
    {% endfor %}
</ul>
{% else %}
<h3 class="center-align">No transport request found.</h3>

{% endif%}

<!-- List of Expired Requests -->
{% if expired_requests|length > 0 %}

<h3 class=" center-align">Past Requests</h3>
<ul class="collapsible">
    {% for req in expired_requests %}
    <li>
        <div class="collapsible-header ">

            <!-- Date and time  -->
            <div class="col s12 m9">
                <i class="fas fa-caret-down"></i>
                <span>Date and Time: {{ req.request_date}} - {{ req.request_time }}</span>

            </div>
        </div>
        <!-- Member details  -->
        <div class="collapsible-body white">
            <p>Pickup Address: <em>{{ req.start_location.address }}</em></strong></p>
            <p>Dropoff Address: <em>{{ req.end_location.address }}</em></p>

        </div>
    </li>
    {% endfor %}
</ul>

{% endif%}


{% endblock %}